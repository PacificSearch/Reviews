<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Pacific Search - Reviews</title>
  <!-- Static CSS file reference using url_for -->
  <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
</head>
<body>
  <header class="header">
    <div class="logo">Pacific Search</div>
    <div class="lang-switcher">
      <button class="lang-btn active">EN</button>
      <button class="lang-btn">HI</button>
    </div>
  </header>

  <div class="search-container">
    <!-- Filter Toggle Button (Circular Icon) -->
    <div class="filter-toggle" onclick="toggleFilters()">âš™</div>
    <input type="text" class="search-bar" placeholder="Search reviews...">
    
    <!-- Scrolling Message -->
    <div class="scroll-message">
      <marquee>Welcome to Pacific Search. Find detailed reviews for your favorite products. Use the filters or search bar to get started!</marquee>
    </div>
    
    <!-- Filter Dropdown Panel -->
    <div class="filter-panel" id="filterPanel">
      <!-- Example: Mobiles category with subcategories as links -->
      <div class="filter-category">
        <img src="https://cdn-icons-png.flaticon.com/128/3064/3064197.png" alt="Mobile Icon"> Mobiles
      </div>
      <div class="filter-options" id="mobiles">
        <!-- Clicking these links will reload the index with filtered reviews -->
        <a href="{{ url_for('index') }}?subcategory=Apple" class="filter-option">Apple</a>
        <a href="{{ url_for('index') }}?subcategory=Samsung" class="filter-option">Samsung</a>
        <a href="{{ url_for('index') }}?subcategory=OnePlus" class="filter-option">OnePlus</a>
      </div>
      <!-- Aap anya categories ke liye similar blocks add kar sakte hain -->
    </div>
  </div>

  <main>
    {% if selected_subcategory %}
      <h2 style="text-align:center;">Reviews for {{ selected_subcategory }}</h2>
    {% endif %}
    {% if reviews %}
      <ul>
      {% for review in reviews %}
        <li>
          <strong>{{ review.category }} - {{ review.subcategory }} ({{ review.language }})</strong> : {{ review.product_name }}<br>
          {{ review.review_text }}
        </li>
        {% for review in reviews %}
  <li>
    <strong>{{ review.category }} - {{ review.subcategory }} ({{ review.language }})</strong> : {{ review.product_name }}<br>
    {{ review.review_text }}
    <!-- Delete form for each review -->
    <form action="{{ url_for('delete_review', review_id=review.id) }}" method="POST" onsubmit="return confirm('Kya aap is review ko delete karna chahte hain?');" style="display:inline;">
      <button type="submit">Delete</button>
    </form>
  </li>
{% endfor %}

      {% endfor %}
      </ul>
    {% else %}
      <p>No reviews uploaded yet.</p>
    {% endif %}
  </main>
  
  <p style="text-align:center;"><a href="{{ url_for('upload_review') }}">Upload a New Review</a></p>

  <!-- Inline JavaScript for language switch and filter toggle -->
  <script>
    document.addEventListener("DOMContentLoaded", function() {
      // Language switch functionality
      var langButtons = document.querySelectorAll('.lang-btn');
      langButtons.forEach(function(button) {
        button.addEventListener('click', function() {
          langButtons.forEach(function(btn) {
            btn.classList.remove('active');
          });
          this.classList.add('active');
          console.log("Language switched to:", this.textContent);
        });
      });
      
      // Filter toggle functionality
      window.toggleFilters = function() {
        var panel = document.getElementById("filterPanel");
        if (!panel) return;
        var currentDisplay = window.getComputedStyle(panel).display;
        panel.style.display = (currentDisplay === "none") ? "block" : "none";
      };
    });
  </script>
</body>
</html>
